<div class="modal-header">
  <div class="modal-title">
    {{"coupon_.upsert"|translate}}
  </div>
</div>

<div class="modal-body">
  <form [formGroup]="coupon.form">
    <div class="row">
      <form-field>
        <trh-slider #slider falseText="passenger" trueText="reagent" value="true"></trh-slider>
      </form-field>
    </div>
    <div [hidden]="!slider.value" style="width: 500px">
      <div class="row">
        <form-field label="reagent_.name">
          <div class="row align-items-center">
            <trh-dropdown [items]="reagents" class="col-4" textField="id" valueField="title"></trh-dropdown>
            <button trhButton class="btn-outline-warning" size="micro" kind="secondary" (click)="reagentUpsert()"><i class="material-icons">add</i></button>
          </div>
        </form-field>
      </div>
      <div class="row">
        <div class="col">
          <div class="row">
            <form-field label="adultCount">
              <input trhInput formControlName="adultCount">
            </form-field>
            <form-field label="emptyCount" class="col-4">0</form-field>
            <form-field label="offValue" class="col-3">
              <input trhInput formControlName="adultPrice">
            </form-field>
          </div>
          <div class="row">
            <form-field label="infantCount">
              <input trhInput formControlName="infantCount">
            </form-field>
            <form-field label="emptyCount" class="col-4">0</form-field>
            <form-field label="offValue" class="col-3">
              <input trhInput formControlName="infantPrice">
            </form-field>
          </div>
        </div>
        <div class="col-5">
          <div class="row">
            <form-field>
              <div class="row">
                <i class="material-icons md-1 ml-2">airport_shuttle</i>
                <input trhInput class="col-4" formControlName="busPrice">
              </div>
            </form-field>
          </div>
          <div class="row">
            <form-field>
              <div class="row">
                <i class="material-icons md-1 ml-2">airline_seat_individual_suite</i>
                <input trhInput class="col-4" formControlName="roomPrice">
              </div>
            </form-field>
          </div>
          <div class="row">
            <form-field>
              <div class="row">
                <i class="material-icons md-1 ml-2">room_service</i>
                <input trhInput class="col-4" formControlName="foodPrice">
              </div>
            </form-field>
          </div>
        </div>
      </div>
    </div>
    <div [hidden]="slider.value" style="width:1100px;">
      <div>
        <span>{{"buyer"|translate}}</span>
        <nb-card>
          <nb-card-body>
            <div class="row">
              <form-field label="nationalCode">
                <input trhInput [formControl]="customer.form.get('nationalCode')">
              </form-field>
              <form-field label="name">
                <input trhInput [formControl]="customer.form.get('name')">
              </form-field>
              <form-field label="family">
                <input trhInput [formControl]="customer.form.get('family')">
              </form-field>
              <form-field label="mobileNumber">
                <input trhInput [formControl]="customer.form.get('mobileNumber')">
              </form-field>
              <form-field label="fatherName">
                <input trhInput [formControl]="customer.form.get('fatherName')">
              </form-field>
              <form-field label="birthDate">
                <input trhInput [formControl]="customer.form.get('birthDate')">
              </form-field>
              <form-field label="passport_.expireDate">
                <input trhInput [formControl]="customer.form.get('passportExpireDate')">
              </form-field>
              <form-field label="passport_.number">
                <input trhInput [formControl]="customer.form.get('passportNo')">
              </form-field>
            </div>
          </nb-card-body>
        </nb-card>
      </div>
      <div>
        {{"fellows"|translate}}
        <button trhButton class="btn-outline-success" size="micro" kind="secondary" (click)="passengers.push(formFactory.createCustomerForm())">
          <i class="material-icons">add</i>
        </button>
        <div class="container">
          <div *ngFor="let item of passengers;let indx=index">
            <nb-card>
              <nb-card-body>
                <button trhButton class="btn-outline-danger closeButton" (click)="passengers.splice(indx,1)" size="micro" kind="secondary">
                  <i class="material-icons">clear</i>
                </button>
                <div class="row">
                  <form-field label="nationalCode">
                    <input trhInput [formControl]="item.form.get('nationalCode')">
                  </form-field>
                  <form-field label="name">
                    <input trhInput [formControl]="item.form.get('name')">
                  </form-field>
                  <form-field label="family">
                    <input trhInput [formControl]="item.form.get('family')">
                  </form-field>
                  <form-field label="mobileNumber">
                    <input trhInput [formControl]="item.form.get('mobileNumber')">
                  </form-field>
                  <form-field label="fatherName">
                    <input trhInput [formControl]="item.form.get('fatherName')">
                  </form-field>
                  <form-field label="birthDate">
                    <input trhInput [formControl]="item.form.get('birthDate')">
                  </form-field>
                  <form-field label="passport_.expireDate">
                    <input trhInput [formControl]="item.form.get('passportExpireDate')">
                  </form-field>
                  <form-field label="passport_.number">
                    <input trhInput [formControl]="item.form.get('passportNo')">
                  </form-field>
                </div>
              </nb-card-body>
            </nb-card>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
<div class="modal-body">
  <div class="row">
    <button trhButton (click)="save()">{{"save"|translate}}</button>
  </div>
</div>

